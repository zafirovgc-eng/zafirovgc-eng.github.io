<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FruitBox - Men√∫ Digital</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');
        body { font-family: 'Poppins', sans-serif; }
        .juice-card { transition: all 0.3s ease; }
        .juice-card:hover { transform: translateY(-5px); }
        .selected { 
            border: 4px solid #059669 !important; 
            background: linear-gradient(135deg, #ecfdf5, #d1fae5) !important; 
            box-shadow: 0 0 0 2px #10b981, 0 4px 12px rgba(16, 185, 129, 0.3) !important;
            transform: scale(1.02) !important;
        }
        .pulse-animation { animation: pulse 2s infinite; }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-green-50 to-orange-50 min-h-screen">
    <!-- Header -->
    <div class="bg-gradient-to-r from-green-500 to-orange-500 text-white p-4 text-center">
        <h1 class="text-3xl font-bold mb-1">üçπ FruitBox</h1>
        <p class="text-sm italic mt-1">Tu jugo, tu estilo, tu fruitbox!</p>
        
        <!-- Social Media Buttons -->
        <div class="mt-3 flex gap-2 justify-center">
            <a href="https://www.facebook.com/profile.php?id=" target="_blank" class="inline-flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-full text-xs font-medium transition-colors">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                </svg>
                Facebook
            </a>
            <a href="https://www.instagram.com/fruitbox_mxl/" target="_blank" class="inline-flex items-center gap-2 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-3 py-2 rounded-full text-xs font-medium transition-colors">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zM12 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                </svg>
                Instagram
            </a>
        </div>
    </div>

    <div class="container mx-auto p-3 max-w-md">
        <!-- Men√∫ Principal -->
        <div class="bg-white rounded-2xl shadow-xl p-4 mb-4">
            <h2 class="text-2xl font-bold text-center mb-4 text-gray-800">üåü Nuestros Jugos Especiales</h2>
            
            <div class="grid grid-cols-1 gap-3 mb-4">
                <div class="juice-card bg-gradient-to-br from-green-100 to-green-200 p-3 rounded-xl cursor-pointer border-2 border-transparent flex items-center gap-3" onclick="selectJuice('verde')">
                    <div class="text-3xl">üíö</div>
                    <div class="flex-1">
                        <h3 class="text-lg font-bold text-green-800">Green Day</h3>
                        <p class="text-green-700 text-xs">Pi√±a, kale, apio, mango, nopal</p>
                    </div>
                    <div class="text-lg font-bold text-green-800">$45</div>
                </div>

                <div class="juice-card bg-gradient-to-br from-orange-100 to-orange-200 p-3 rounded-xl cursor-pointer border-2 border-transparent flex items-center gap-3" onclick="selectJuice('naranja')">
                    <div class="text-3xl">üß°</div>
                    <div class="flex-1">
                        <h3 class="text-lg font-bold text-orange-800">AC/DCitrus</h3>
                        <p class="text-orange-700 text-xs">Jugo de naranja natural con zanahoria opcional</p>
                    </div>
                    <div class="text-lg font-bold text-orange-800">$45</div>
                </div>

                <div class="juice-card bg-gradient-to-br from-yellow-100 to-yellow-200 p-3 rounded-xl cursor-pointer border-2 border-transparent flex items-center gap-3" onclick="selectJuice('mango')">
                    <div class="text-3xl">üíõ</div>
                    <div class="flex-1">
                        <h3 class="text-lg font-bold text-yellow-800">Mango Van Gogh</h3>
                        <p class="text-yellow-700 text-xs">Puro mango dulce</p>
                    </div>
                    <div class="text-lg font-bold text-yellow-800">$50</div>
                </div>

                <div class="juice-card bg-gradient-to-br from-purple-100 to-purple-200 p-3 rounded-xl cursor-pointer border-2 border-transparent flex items-center gap-3" onclick="selectJuice('berries')">
                    <div class="text-3xl">üçá</div>
                    <div class="flex-1">
                        <h3 class="text-lg font-bold text-purple-800">Berryonc√©</h3>
                        <p class="text-purple-700 text-xs">Frambuesa, mora azul, zarzamora</p>
                    </div>
                    <div class="text-lg font-bold text-purple-800">$55</div>
                </div>

                <div class="juice-card bg-gradient-to-br from-pink-100 to-pink-200 p-3 rounded-xl cursor-pointer border-2 border-transparent flex items-center gap-3" onclick="selectJuice('fresa')">
                    <div class="text-3xl">‚ù§Ô∏è</div>
                    <div class="flex-1">
                        <h3 class="text-lg font-bold text-pink-800">Adeleicious</h3>
                        <p class="text-pink-700 text-xs">Licuado de fresa (con pl√°tano opcional)</p>
                    </div>
                    <div class="text-lg font-bold text-pink-800">$50</div>
                </div>

                <div class="juice-card bg-gradient-to-br from-blue-100 to-blue-200 p-3 rounded-xl cursor-pointer border-2 border-transparent flex items-center gap-3" onclick="selectJuice('personalizado')">
                    <div class="text-3xl">‚≠ê</div>
                    <div class="flex-1">
                        <h3 class="text-lg font-bold text-blue-800">¬°Crea el Tuyo!</h3>
                        <p class="text-blue-700 text-xs">Combina como quieras</p>
                    </div>
                </div>
            </div>
            
            <!-- Bot√≥n Ver Carrito -->
            <div class="text-center">
                <button onclick="toggleCart()" class="bg-gray-800 text-white px-6 py-2 rounded-full font-medium hover:bg-gray-700 transition-colors relative">
                    üõí Ver Carrito (<span id="cart-count">0</span>)
                </button>
            </div>
        </div>

        <!-- Carrito de Compras -->
        <div id="cart-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
            <div class="flex items-center justify-center min-h-screen p-4">
                <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[80vh] overflow-y-auto">
                    <div class="p-4 border-b border-gray-200 flex justify-between items-center">
                        <h3 class="text-xl font-bold text-gray-800">üõí Tu Carrito</h3>
                        <button onclick="toggleCart()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
                    </div>
                    
                    <div id="cart-items" class="p-4">
                        <div id="empty-cart" class="text-center py-8 text-gray-500">
                            <div class="text-4xl mb-2">üõí</div>
                            <p>Tu carrito est√° vac√≠o</p>
                            <p class="text-sm">¬°Agrega algunos jugos deliciosos!</p>
                        </div>
                    </div>
                    
                    <div id="cart-summary" class="hidden border-t border-gray-200 p-4 bg-gray-50">
                        <div class="space-y-2 mb-4">
                            <div class="flex justify-between text-sm">
                                <span>Subtotal:</span>
                                <span id="cart-subtotal">$0</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span>Env√≠o:</span>
                                <span id="cart-shipping">$0</span>
                            </div>
                            <div class="flex justify-between font-bold text-lg border-t pt-2">
                                <span>Total:</span>
                                <span id="cart-total">$0</span>
                            </div>
                        </div>
                        
                        <button onclick="proceedToCheckout()" class="w-full bg-gradient-to-r from-green-500 to-orange-500 text-white font-bold py-3 rounded-xl hover:from-green-600 hover:to-orange-600 transition-colors">
                            Proceder al Checkout
                        </button>
                    </div>
                </div></div>
        </div>

        <!-- Extras para Personalizar -->
        <div id="extras-section" class="bg-white rounded-2xl shadow-xl p-4 mb-4 hidden">
            <h3 class="text-xl font-bold mb-3 text-gray-800">üåà Crea el Tuyo</h3>
            <p class="text-sm text-gray-600 mb-3">Los costos pueden variar de acuerdo a su selecci√≥n</p>
            <div class="grid grid-cols-3 gap-2">
                <div class="extra-item bg-green-100 p-2 rounded-lg text-center cursor-pointer hover:bg-green-200" onclick="toggleExtra('pepino')">
                    <div class="text-xl mb-1">ü•í</div>
                    <div class="text-xs font-medium">Pepino</div>
                </div>
                <div class="extra-item bg-green-100 p-2 rounded-lg text-center cursor-pointer hover:bg-green-200" onclick="toggleExtra('apio')">
                    <div class="text-xl mb-1">ü•¨</div>
                    <div class="text-xs font-medium">Apio</div>
                </div>
                <div class="extra-item bg-pink-100 p-2 rounded-lg text-center cursor-pointer hover:bg-pink-200" onclick="toggleExtra('fresa')">
                    <div class="text-xl mb-1">üçì</div>
                    <div class="text-xs font-medium">Fresa</div>
                </div>
                <div class="extra-item bg-yellow-100 p-2 rounded-lg text-center cursor-pointer hover:bg-yellow-200" onclick="toggleExtra('platano')">
                    <div class="text-xl mb-1">üçå</div>
                    <div class="text-xs font-medium">Pl√°tano</div>
                </div>
                <div class="extra-item bg-yellow-100 p-2 rounded-lg text-center cursor-pointer hover:bg-yellow-200" onclick="toggleExtra('limon')">
                    <div class="text-xl mb-1">üçã</div>
                    <div class="text-xs font-medium">Lim√≥n</div>
                </div>
                <div class="extra-item bg-orange-100 p-2 rounded-lg text-center cursor-pointer hover:bg-orange-200" onclick="toggleExtra('naranja')">
                    <div class="text-xl mb-1">üçä</div>
                    <div class="text-xs font-medium">Naranja</div>
                </div>
                <div class="extra-item bg-orange-100 p-2 rounded-lg text-center cursor-pointer hover:bg-orange-200" onclick="toggleExtra('papaya')">
                    <div class="text-xl mb-1">üß°</div>
                    <div class="text-xs font-medium">Papaya</div>
                </div>
                <div class="extra-item bg-green-100 p-2 rounded-lg text-center cursor-pointer hover:bg-green-200" onclick="toggleExtra('manzana')">
                    <div class="text-xl mb-1">üçè</div>
                    <div class="text-xs font-medium">Manzana</div>
                </div>
                <div class="extra-item bg-yellow-100 p-2 rounded-lg text-center cursor-pointer hover:bg-yellow-200" onclick="toggleExtra('mango')">
                    <div class="text-xl mb-1">ü•≠</div>
                    <div class="text-xs font-medium">Mango</div>
                </div>
                <div class="extra-item bg-purple-100 p-2 rounded-lg text-center cursor-pointer hover:bg-purple-200" onclick="toggleExtra('berries')">
                    <div class="text-xl mb-1">üçá</div>
                    <div class="text-xs font-medium">Berries</div>
                </div>
                <div class="extra-item bg-orange-100 p-2 rounded-lg text-center cursor-pointer hover:bg-orange-200" onclick="toggleExtra('zanahoria')">
                    <div class="text-xl mb-1">ü•ï</div>
                    <div class="text-xs font-medium">Zanahoria</div>
                </div>
                <div class="extra-item bg-green-100 p-2 rounded-lg text-center cursor-pointer hover:bg-green-200" onclick="toggleExtra('espinaca')">
                    <div class="text-xl mb-1">ü•¨</div>
                    <div class="text-xs font-medium">Espinaca</div>
                </div>
                <div class="extra-item bg-red-100 p-2 rounded-lg text-center cursor-pointer hover:bg-red-200" onclick="toggleExtra('betabel')">
                    <div class="text-xl mb-1">üü£</div>
                    <div class="text-xs font-medium">Betabel</div>
                </div></div>
            
            <!-- Nombre tu estilo -->
            <div class="mt-4 p-3 bg-gradient-to-r from-purple-100 to-pink-100 rounded-lg border-2 border-dashed border-purple-300">
                <h4 class="text-lg font-bold text-purple-800 mb-2">‚ú® ¬°Ponle nombre a tu estilo!</h4>
                <p class="text-sm text-purple-700 mb-2">Si nos gusta mucho podr√≠a aparecer en el men√∫</p>
                <input type="text" id="custom-name" placeholder="Ej: El S√∫per Verde de Mar√≠a" class="w-full p-2 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm">
            </div>
        </div>


        </div>

        <!-- Extras para Personalizar -->
        <div id="extras-section" class="bg-white rounded-2xl shadow-xl p-4 mb-4 hidden">
            <h3 class="text-xl font-bold mb-3 text-gray-800">üåà Crea el Tuyo</h3>
            <p class="text-sm text-gray-600 mb-3">Los costos pueden variar de acuerdo a su selecci√≥n</p>
            <div class="grid grid-cols-3 gap-2">
                <div class="extra-item bg-green-100 p-2 rounded-lg text-center cursor-pointer hover:bg-green-200" onclick="toggleExtra('pepino')">
                    <div class="text-xl mb-1">ü•í</div>
                    <div class="text-xs font-medium">Pepino</div>
                </div>
                <div class="extra-item bg-green-100 p-2 rounded-lg text-center cursor-pointer hover:bg-green-200" onclick="toggleExtra('apio')">
                    <div class="text-xl mb-1">ü•¨</div>
                    <div class="text-xs font-medium">Apio</div>
                </div>
                <div class="extra-item bg-pink-100 p-2 rounded-lg text-center cursor-pointer hover:bg-pink-200" onclick="toggleExtra('fresa')">
                    <div class="text-xl mb-1">üçì</div>
                    <div class="text-xs font-medium">Fresa</div>
                </div>
                <div class="extra-item bg-yellow-100 p-2 rounded-lg text-center cursor-pointer hover:bg-yellow-200" onclick="toggleExtra('platano')">
                    <div class="text-xl mb-1">üçå</div>
                    <div class="text-xs font-medium">Pl√°tano</div>
                </div>
                <div class="extra-item bg-yellow-100 p-2 rounded-lg text-center cursor-pointer hover:bg-yellow-200" onclick="toggleExtra('limon')">
                    <div class="text-xl mb-1">üçã</div>
                    <div class="text-xs font-medium">Lim√≥n</div>
                </div>
                <div class="extra-item bg-orange-100 p-2 rounded-lg text-center cursor-pointer hover:bg-orange-200" onclick="toggleExtra('naranja')">
                    <div class="text-xl mb-1">üçä</div>
                    <div class="text-xs font-medium">Naranja</div>
                </div>
                <div class="extra-item bg-orange-100 p-2 rounded-lg text-center cursor-pointer hover:bg-orange-200" onclick="toggleExtra('papaya')">
                    <div class="text-xl mb-1">üß°</div>
                    <div class="text-xs font-medium">Papaya</div>
                </div>
                <div class="extra-item bg-green-100 p-2 rounded-lg text-center cursor-pointer hover:bg-green-200" onclick="toggleExtra('manzana')">
                    <div class="text-xl mb-1">üçè</div>
                    <div class="text-xs font-medium">Manzana</div>
                </div>
                <div class="extra-item bg-yellow-100 p-2 rounded-lg text-center cursor-pointer hover:bg-yellow-200" onclick="toggleExtra('mango')">
                    <div class="text-xl mb-1">ü•≠</div>
                    <div class="text-xs font-medium">Mango</div>
                </div>
                <div class="extra-item bg-purple-100 p-2 rounded-lg text-center cursor-pointer hover:bg-purple-200" onclick="toggleExtra('berries')">
                    <div class="text-xl mb-1">üçá</div>
                    <div class="text-xs font-medium">Berries</div>
                </div>
                <div class="extra-item bg-orange-100 p-2 rounded-lg text-center cursor-pointer hover:bg-orange-200" onclick="toggleExtra('zanahoria')">
                    <div class="text-xl mb-1">ü•ï</div>
                    <div class="text-xs font-medium">Zanahoria</div>
                </div>
                <div class="extra-item bg-green-100 p-2 rounded-lg text-center cursor-pointer hover:bg-green-200" onclick="toggleExtra('espinaca')">
                    <div class="text-xl mb-1">ü•¨</div>
                    <div class="text-xs font-medium">Espinaca</div>
                </div>
                <div class="extra-item bg-red-100 p-2 rounded-lg text-center cursor-pointer hover:bg-red-200" onclick="toggleExtra('betabel')">
                    <div class="text-xl mb-1">üü£</div>
                    <div class="text-xs font-medium">Betabel</div>
                </div>
            </div>
            
            <!-- Nombre tu estilo -->
            <div class="mt-4 p-3 bg-gradient-to-r from-purple-100 to-pink-100 rounded-lg border-2 border-dashed border-purple-300">
                <h4 class="text-lg font-bold text-purple-800 mb-2">‚ú® ¬°Ponle nombre a tu estilo!</h4>
                <p class="text-sm text-purple-700 mb-2">Si nos gusta mucho podr√≠a aparecer en el men√∫</p>
                <input type="text" id="custom-name" placeholder="Ej: El S√∫per Verde de Mar√≠a" class="w-full p-2 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm">
            </div>
        </div>

        <!-- Opciones de Preparaci√≥n -->
        <div class="bg-white rounded-2xl shadow-xl p-4 mb-4">
            <h3 class="text-xl font-bold mb-3 text-gray-800">ü•§ M√©todo de Preparaci√≥n</h3>
            <div class="grid grid-cols-1 gap-3">
                <div class="prep-option bg-blue-100 p-3 rounded-xl cursor-pointer border-2 border-transparent hover:bg-blue-200 flex items-center gap-3" onclick="selectPrep('frapeado')">
                    <div class="text-2xl">üßä</div>
                    <h4 class="font-bold">Frapeado</h4>
                </div>
                <div class="prep-option bg-green-100 p-3 rounded-xl cursor-pointer border-2 border-transparent hover:bg-green-200 flex items-center gap-3" onclick="selectPrep('natural')">
                    <div class="text-2xl">üåø</div>
                    <h4 class="font-bold">Natural</h4>
                </div>
                <div class="prep-option bg-gray-100 p-3 rounded-xl cursor-pointer border-2 border-transparent hover:bg-gray-200 flex items-center gap-3" onclick="selectPrep('rocas')">
                    <div class="text-2xl">üßä</div>
                    <h4 class="font-bold">En las Rocas</h4>
                </div>
            </div>
        </div>

        <!-- Endulzante -->
        <div class="bg-white rounded-2xl shadow-xl p-4 mb-4">
            <h3 class="text-xl font-bold mb-3 text-gray-800">üçØ Endulzante</h3>
            <div class="grid grid-cols-2 gap-3">
                <div class="sweet-option bg-yellow-100 p-3 rounded-xl cursor-pointer border-2 border-transparent hover:bg-yellow-200" onclick="selectSweet('azucar')">
                    <div class="text-xl mb-1 text-center">üçØ</div>
                    <h4 class="font-bold text-center text-sm">Az√∫car</h4>
                </div>
                <div class="sweet-option bg-green-100 p-3 rounded-xl cursor-pointer border-2 border-transparent hover:bg-green-200" onclick="selectSweet('stevia')">
                    <div class="text-xl mb-1 text-center">üåø</div>
                    <h4 class="font-bold text-center text-sm">Stevia</h4>
                </div>
                <div class="sweet-option bg-amber-100 p-3 rounded-xl cursor-pointer border-2 border-transparent hover:bg-amber-200" onclick="selectSweet('miel')">
                    <div class="text-xl mb-1 text-center">üçØ</div>
                    <h4 class="font-bold text-center text-sm">Miel Natural</h4>
                </div>
                <div class="sweet-option bg-gray-100 p-3 rounded-xl cursor-pointer border-2 border-transparent hover:bg-gray-200" onclick="selectSweet('sin')">
                    <div class="text-xl mb-1 text-center">üö´</div>
                    <h4 class="font-bold text-center text-sm">Sin Az√∫car</h4>
                </div>
            </div>
        </div>

        <!-- Tama√±o -->
        <div class="bg-white rounded-2xl shadow-xl p-4 mb-4">
            <h3 class="text-xl font-bold mb-3 text-gray-800">Tama√±o</h3>
            <div class="grid grid-cols-1 gap-3">
                <div class="size-option bg-blue-100 p-4 rounded-xl cursor-pointer border-2 border-transparent hover:bg-blue-200 flex items-center gap-3" onclick="selectSize('16oz')">
                    <div class="text-3xl">ü•§</div>
                    <div class="flex-1">
                        <h4 class="font-bold">16oz - Chico</h4>
                    </div>
                </div>
                <div class="size-option bg-purple-100 p-4 rounded-xl cursor-pointer border-2 border-transparent hover:bg-purple-200 flex items-center gap-3" onclick="selectSize('24oz')">
                    <div class="text-3xl">ü•§</div>
                    <div class="flex-1">
                        <h4 class="font-bold">24oz - Grande</h4>
                         <p class="text-sm text-gray-600">+$10 MXN</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- M√©todo de Entrega -->
        <div class="bg-white rounded-2xl shadow-xl p-4 mb-4">
            <h3 class="text-xl font-bold mb-3 text-gray-800">Entrega</h3>
            <div class="grid grid-cols-1 gap-3">
                <div class="delivery-option bg-green-100 p-4 rounded-xl cursor-pointer border-2 border-transparent hover:bg-green-200 flex items-center gap-3" onclick="selectDelivery('tienda')">
                    <div class="text-3xl">üè™</div>
                    <div class="flex-1">
                        <h4 class="font-bold">Recoger en Tienda</h4>
                        <p class="text-sm text-gray-600">Sin costo adicional</p>
                    </div>
                </div>
                <div class="delivery-option bg-orange-100 p-4 rounded-xl cursor-pointer border-2 border-transparent hover:bg-orange-200 flex items-center gap-3" onclick="selectDelivery('domicilio')">
                    <div class="text-3xl">üöó</div>
                    <div class="flex-1">
                        <h4 class="font-bold">Env√≠o a Domicilio</h4>
                        <p class="text-sm text-gray-600">+$20 MXN (GRATIS con 3+ jugos)</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- M√©todo de Pago -->
        <div class="bg-white rounded-2xl shadow-xl p-4 mb-4">
            <h3 class="text-xl font-bold mb-3 text-gray-800">M√©todo de Pago</h3>
            <div class="grid grid-cols-1 gap-3">
                <div class="payment-option bg-green-100 p-4 rounded-xl cursor-pointer border-2 border-transparent hover:bg-green-200 flex items-center gap-3" onclick="selectPayment('efectivo')">
                    <div class="text-3xl">üíµ</div>
                    <h4 class="font-bold">Efectivo</h4>
                </div>
                <div class="payment-option bg-blue-100 p-4 rounded-xl cursor-pointer border-2 border-transparent hover:bg-blue-200 flex items-center gap-3" onclick="selectPayment('transferencia')">
                    <div class="text-3xl">üí≥</div>
                    <h4 class="font-bold">Transferencia HSBC</h4>
                </div>
            </div>
        </div>

        <!-- Datos de Domicilio -->
        <div id="delivery-form" class="bg-white rounded-2xl shadow-xl p-4 mb-4 hidden">
            <h3 class="text-xl font-bold mb-3 text-gray-800">Datos de Entrega</h3>
            <div class="space-y-3">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Colonia</label>
                    <input type="text" id="colonia" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" oninput="updateOrderSummary()">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Calle</label>
                    <input type="text" id="calle" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" oninput="updateOrderSummary()">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">N√∫mero Exterior</label>
                    <input type="text" id="numero" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" oninput="updateOrderSummary()">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Privada (opcional)</label>
                    <input type="text" id="privada" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">C√≥digo de Acceso (opcional)</label>
                    <input type="text" id="codigo" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Tel√©fono</label>
                    <input type="tel" id="telefono" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" oninput="updateOrderSummary()">
                </div>
            </div>
        </div>

        <!-- Bot√≥n Agregar al Carrito -->
        <div id="add-to-cart-section" class="hidden mb-4">
            <div class="flex gap-2">
                <button id="add-to-cart-btn" onclick="addToCart()" class="flex-1 bg-gradient-to-r from-green-500 to-orange-500 text-white font-bold py-4 px-6 rounded-xl hover:from-green-600 hover:to-orange-600 transition-colors shadow-lg text-lg">
                    üõí Agregar al Carrito
                </button>
                <button onclick="showIndividualOrder()" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-4 px-4 rounded-xl transition-colors shadow-lg">
                    ‚úÖ Aceptar Pedido
                </button>
            </div>
        </div>

        <!-- Resumen del Pedido Individual -->
        <div id="order-summary" class="bg-gradient-to-r from-green-500 to-orange-500 text-white rounded-2xl shadow-xl p-4 mb-4 hidden">
            <h3 class="text-xl font-bold mb-3">Tu Pedido</h3>
            <div class="flex items-center gap-4 mb-3">
                <div id="juice-image" class="text-6xl"></div>
                <div id="order-details" class="space-y-1 flex-1 text-sm"></div>
            </div>
            <div id="total-price" class="text-lg font-bold mb-3 bg-white bg-opacity-20 p-3 rounded-lg"></div>
            <button id="whatsapp-btn" onclick="sendWhatsApp()" class="w-full bg-white text-green-600 font-bold py-3 px-4 rounded-xl hover:bg-gray-100 transition-colors pulse-animation text-sm">
                Enviar Pedido por WhatsApp
            </button>
        </div>
    </div>

    <script>
        let currentOrder = {
            juice: '',
            extras: [],
            preparation: '',
            sweetener: '',
            size: '',
            delivery: '',
            payment: ''
        };

        let cart = [];
        let cartCount = 0;

        function selectJuice(juice) {
            document.querySelectorAll('.juice-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            event.target.closest('.juice-card').classList.add('selected');
            currentOrder.juice = juice;
            
            if (juice === 'personalizado') {
                document.getElementById('extras-section').classList.remove('hidden');
                // Scroll to extras section
                setTimeout(() => {
                    document.getElementById('extras-section').scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'start' 
                    });
                }, 100);
            } else {
                document.getElementById('extras-section').classList.add('hidden');
                currentOrder.extras = [];
                document.querySelectorAll('.extra-item').forEach(item => {
                    item.classList.remove('selected');
                });
                // Scroll to preparation section
                setTimeout(() => {
                    const preparationSection = document.querySelector('h3').parentElement;
                    const sections = document.querySelectorAll('.bg-white.rounded-2xl.shadow-xl.p-6.mb-6');
                    for (let section of sections) {
                        if (section.textContent.includes('M√©todo de Preparaci√≥n')) {
                            section.scrollIntoView({ 
                                behavior: 'smooth', 
                                block: 'start' 
                            });
                            break;
                        }
                    }
                }, 100);
            }
            
            showAddToCartButton();
            updateOrderSummary();
        }

        function showAddToCartButton() {
            if (currentOrder.juice && currentOrder.preparation && currentOrder.sweetener && currentOrder.size) {
                document.getElementById('add-to-cart-section').classList.remove('hidden');
            } else {
                document.getElementById('add-to-cart-section').classList.add('hidden');
            }
        }

        function showIndividualOrder() {
            if (!currentOrder.juice || !currentOrder.preparation || !currentOrder.sweetener || !currentOrder.size) {
                alert('Por favor completa todas las opciones antes de continuar');
                return;
            }
            
            // Scroll to delivery section
            setTimeout(() => {
                const sections = document.querySelectorAll('.bg-white.rounded-2xl.shadow-xl');
                for (let section of sections) {
                    if (section.textContent.includes('Entrega')) {
                        section.scrollIntoView({ 
                            behavior: 'smooth', 
                            block: 'start' 
                        });
                        break;
                    }
                }
            }, 100);
        }

        function toggleExtra(extra) {
            const extraElement = event.target.closest('.extra-item');
            
            if (currentOrder.extras.includes(extra)) {
                currentOrder.extras = currentOrder.extras.filter(e => e !== extra);
                extraElement.classList.remove('selected');
            } else {
                currentOrder.extras.push(extra);
                extraElement.classList.add('selected');
            }
            
            updateOrderSummary();
        }

        function selectPrep(prep) {
            document.querySelectorAll('.prep-option').forEach(option => {
                option.classList.remove('selected');
            });
            event.target.closest('.prep-option').classList.add('selected');
            currentOrder.preparation = prep;
            
            // Scroll to next section
            setTimeout(() => {
                const sections = document.querySelectorAll('.bg-white.rounded-2xl.shadow-xl');
                for (let section of sections) {
                    if (section.textContent.includes('Endulzante')) {
                        section.scrollIntoView({ 
                            behavior: 'smooth', 
                            block: 'start' 
                        });
                        break;
                    }
                }
            }, 100);
            
            showAddToCartButton();
            updateOrderSummary();
        }

        function selectSweet(sweet) {
            document.querySelectorAll('.sweet-option').forEach(option => {
                option.classList.remove('selected');
            });
            event.target.closest('.sweet-option').classList.add('selected');
            currentOrder.sweetener = sweet;
            
            // Scroll to next section
            setTimeout(() => {
                const sections = document.querySelectorAll('.bg-white.rounded-2xl.shadow-xl');
                for (let section of sections) {
                    if (section.textContent.includes('Tama√±o')) {
                        section.scrollIntoView({ 
                            behavior: 'smooth', 
                            block: 'start' 
                        });
                        break;
                    }
                }
            }, 100);
            
            showAddToCartButton();
            updateOrderSummary();
        }

        function selectSize(size) {
            document.querySelectorAll('.size-option').forEach(option => {
                option.classList.remove('selected');
            });
            event.target.closest('.size-option').classList.add('selected');
            currentOrder.size = size;
            
            showAddToCartButton();
            updateOrderSummary();
        }

        function selectDelivery(delivery) {
            document.querySelectorAll('.delivery-option').forEach(option => {
                option.classList.remove('selected');
            });
            event.target.closest('.delivery-option').classList.add('selected');
            currentOrder.delivery = delivery;
            
            if (delivery === 'domicilio') {
                document.getElementById('delivery-form').classList.remove('hidden');
            } else {
                document.getElementById('delivery-form').classList.add('hidden');
            }
            
            // Scroll to next section
            setTimeout(() => {
                const sections = document.querySelectorAll('.bg-white.rounded-2xl.shadow-xl');
                for (let section of sections) {
                    if (section.textContent.includes('M√©todo de Pago')) {
                        section.scrollIntoView({ 
                            behavior: 'smooth', 
                            block: 'start' 
                        });
                        break;
                    }
                }
            }, 100);
            
            // Show cart checkout summary if cart has items
            if (cart.length > 0) {
                showCartCheckoutSummary();
            } else {
                updateOrderSummary();
            }
        }

        function selectPayment(payment) {
            document.querySelectorAll('.payment-option').forEach(option => {
                option.classList.remove('selected');
            });
            event.target.closest('.payment-option').classList.add('selected');
            currentOrder.payment = payment;
            
            // Show final order summary for cart checkout
            if (cart.length > 0) {
                showCartCheckoutSummary();
            } else {
                updateOrderSummary();
            }
        }

        function showCartCheckoutSummary() {
            if (currentOrder.delivery && currentOrder.payment) {
                const summary = document.getElementById('order-summary');
                const details = document.getElementById('order-details');
                const totalPrice = document.getElementById('total-price');
                const juiceImage = document.getElementById('juice-image');
                const whatsappBtn = document.getElementById('whatsapp-btn');
                
                summary.classList.remove('hidden');
                
                // Scroll to order summary
                setTimeout(() => {
                    summary.scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'start' 
                    });
                }, 100);
                
                let subtotal = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
                const totalJuices = cart.reduce((total, item) => total + item.quantity, 0);
                let shippingCost = 0;
                
                // Aplicar costo de env√≠o solo si es domicilio Y hay menos de 3 jugos
                if (currentOrder.delivery === 'domicilio' && totalJuices < 3) {
                    shippingCost = 20;
                }
                
                let finalTotal = subtotal + shippingCost;
                
                juiceImage.innerHTML = 'üõí';
                
                // Mostrar detalles completos del carrito
                let orderText = `<div class="font-bold mb-2">üõí Resumen del Carrito (${cart.length} productos)</div>`;
                
                // Agregar cada producto del carrito
                cart.forEach((item, index) => {
                    const itemTotal = item.price * item.quantity;
                    orderText += `<div class="text-xs mb-2 bg-white bg-opacity-20 p-2 rounded">`;
                    orderText += `<div class="font-medium">${index + 1}. ${item.name}`;
                    if (item.customName) {
                        orderText += ` - "${item.customName}"`;
                    }
                    orderText += `</div>`;
                    orderText += `<div>Tama√±o: ${item.size === '16oz' ? '16oz (Chico)' : '24oz (Grande)'} | Cantidad: ${item.quantity}</div>`;
                    if (item.extras.length > 0) {
                        orderText += `<div>Extras: ${item.extras.join(', ')}</div>`;
                    }
                    orderText += `<div>Preparaci√≥n: ${item.preparation} | Endulzante: ${item.sweetener}</div>`;
                    orderText += `<div class="font-medium">Subtotal: $${itemTotal} MXN</div>`;
                    orderText += `</div>`;
                });
                
                orderText += `<div class="mt-2 pt-2 border-t border-white border-opacity-30">`;
                orderText += `<div>üì¶ Entrega: ${currentOrder.delivery === 'tienda' ? 'Recoger en tienda' : 'Env√≠o a domicilio'}</div>`;
                orderText += `<div>üí≥ Pago: ${currentOrder.payment === 'efectivo' ? 'Efectivo' : 'Transferencia HSBC'}</div>`;
                orderText += `</div>`;
                
                details.innerHTML = orderText;
                
                let shippingText = '';
                if (currentOrder.delivery === 'domicilio') {
                    if (totalJuices >= 3) {
                        shippingText = `Subtotal: $${subtotal} + Env√≠o: $0 (¬°GRATIS por ${totalJuices} jugos! üéâ) = Total: $${finalTotal} MXN`;
                    } else {
                        shippingText = `Subtotal: $${subtotal} + Env√≠o: $${shippingCost} = Total: $${finalTotal} MXN`;
                    }
                } else {
                    shippingText = `Subtotal: $${subtotal} + Env√≠o: $0 (Recoger en tienda) = Total: $${finalTotal} MXN`;
                }
                totalPrice.innerHTML = shippingText;

                // Validar campos de domicilio si es necesario
                if (currentOrder.delivery === 'domicilio') {
                    const colonia = document.getElementById('colonia').value.trim();
                    const calle = document.getElementById('calle').value.trim();
                    const numero = document.getElementById('numero').value.trim();
                    const telefono = document.getElementById('telefono').value.trim();

                    if (!colonia || !calle || !numero || !telefono) {
                        whatsappBtn.disabled = true;
                        whatsappBtn.classList.add('opacity-50', 'cursor-not-allowed');
                        whatsappBtn.innerHTML = 'Complete los datos de domicilio';
                        return; // No continuar si faltan datos
                    }
                }
                
                // Si llegamos aqu√≠, todo est√° completo
                whatsappBtn.disabled = false;
                whatsappBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                whatsappBtn.innerHTML = 'Enviar Pedido por WhatsApp';
            }
        }

        function updateOrderSummary() {
            const summary = document.getElementById('order-summary');
            const details = document.getElementById('order-details');
            const totalPrice = document.getElementById('total-price');
            const juiceImage = document.getElementById('juice-image');
            const whatsappBtn = document.getElementById('whatsapp-btn');
            
            if (currentOrder.juice && currentOrder.preparation && currentOrder.sweetener && 
                currentOrder.size && currentOrder.delivery && currentOrder.payment) {
                summary.classList.remove('hidden');
                
                let orderText = '';
                let price = 0;
                
                // Precios base por jugo
                const juicePrices = {
                    'verde': 45,
                    'naranja': 45,
                    'mango': 50,
                    'berries': 55,
                    'fresa': 50,
                    'personalizado': 50
                };
                
                price = juicePrices[currentOrder.juice] || 50;

                // Agregar costo por tama√±o
                if (currentOrder.size === '24oz') {
                    price += 10;
                }
                
                const juiceNames = {
                    'verde': 'Green Day',
                    'naranja': 'AC/DCitrus',
                    'mango': 'Mango Van Gogh',
                    'berries': 'Berryonc√©',
                    'fresa': 'Adeleicious',
                    'personalizado': 'Jugo Personalizado'
                };

                const juiceImages = {
                    'verde': 'ü•¨',
                    'naranja': 'üçä',
                    'mango': 'ü•≠',
                    'berries': 'üçá',
                    'fresa': 'üçì',
                    'personalizado': 'üé®'
                };
                
                juiceImage.innerHTML = juiceImages[currentOrder.juice];
                
                orderText += `<div class="font-bold">${juiceNames[currentOrder.juice]}</div>`;
                
                if (currentOrder.extras.length > 0) {
                    orderText += `<div>Extras: ${currentOrder.extras.join(', ')}</div>`;
                    // Cobrar $5 por cada ingrediente extra a partir del 4to
                    if (currentOrder.extras.length > 3) {
                        const extraCost = (currentOrder.extras.length - 3) * 5;
                        price += extraCost;
                        orderText += `<div class="text-xs text-yellow-200">+$${extraCost} por ${currentOrder.extras.length - 3} extra(s)</div>`;
                    }
                }
                
                orderText += `<div>Preparaci√≥n: ${currentOrder.preparation}</div>`;
                orderText += `<div>Endulzante: ${currentOrder.sweetener}</div>`;
                orderText += `<div>Tama√±o: ${currentOrder.size}</div>`;
                orderText += `<div>Entrega: ${currentOrder.delivery === 'tienda' ? 'Recoger en tienda' : 'Env√≠o a domicilio'}</div>`;
                orderText += `<div>Pago: ${currentOrder.payment === 'efectivo' ? 'Efectivo' : 'Transferencia HSBC'}</div>`;
                
                // Para pedidos individuales, siempre cobrar env√≠o si es domicilio
                if (currentOrder.delivery === 'domicilio') {
                    price += 20;
                }
                
                details.innerHTML = orderText;
                totalPrice.innerHTML = `Total: $${price} MXN`;

                // Validar campos de domicilio
                if (currentOrder.delivery === 'domicilio') {
                    const colonia = document.getElementById('colonia').value.trim();
                    const calle = document.getElementById('calle').value.trim();
                    const numero = document.getElementById('numero').value.trim();
                    const telefono = document.getElementById('telefono').value.trim();

                    if (!colonia || !calle || !numero || !telefono) {
                        whatsappBtn.disabled = true;
                        whatsappBtn.classList.add('opacity-50', 'cursor-not-allowed');
                        whatsappBtn.innerHTML = 'Complete los datos de domicilio';
                    } else {
                        whatsappBtn.disabled = false;
                        whatsappBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                        whatsappBtn.innerHTML = 'Enviar Pedido por WhatsApp';
                    }
                } else {
                    whatsappBtn.disabled = false;
                    whatsappBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                    whatsappBtn.innerHTML = 'Enviar Pedido por WhatsApp';
                }
            } else {
                summary.classList.add('hidden');
            }
        }

        function sendWhatsApp() {
            let message = `üçπ ¬°Hola! Quiero hacer un pedido de FruitBox\n\n`;
            
            // Si hay items en el carrito, enviar pedido del carrito
            if (cart.length > 0) {
                message += `üõí MI PEDIDO (${cart.length} productos):\n\n`;
                
                let subtotal = 0;
                cart.forEach((item, index) => {
                    const itemTotal = item.price * item.quantity;
                    subtotal += itemTotal;
                    
                    message += `${index + 1}. ${item.name}\n`;
                    if (item.customName) {
                        message += `   ‚ú® "${item.customName}"\n`;
                    }
                    message += `   üìè Tama√±o: ${item.size === '16oz' ? '16 oz (Chico)' : '24 oz (Grande)'}\n`;
                    message += `   ü•§ Preparaci√≥n: ${item.preparation}\n`;
                    message += `   üçØ Endulzante: ${item.sweetener}\n`;
                    if (item.extras.length > 0) {
                        message += `   üåà Extras: ${item.extras.join(', ')}\n`;
                    }
                    message += `   üî¢ Cantidad: ${item.quantity}\n`;
                    message += `   üí∞ Precio: $${itemTotal} MXN\n\n`;
                });
                
                // Calcular env√≠o - GRATIS si son 3 o m√°s jugos
                const totalJuices = cart.reduce((total, item) => total + item.quantity, 0);
                let shippingCost = 0;
                if (currentOrder.delivery === 'domicilio' && totalJuices < 3) {
                    shippingCost = 20;
                }
                const finalTotal = subtotal + shippingCost;
                
                message += `üí∞ RESUMEN:\n`;
                message += `   Subtotal: $${subtotal} MXN\n`;
                if (totalJuices >= 3 && currentOrder.delivery === 'domicilio') {
                    message += `   Env√≠o: $${shippingCost} MXN (¬°GRATIS por ${totalJuices} jugos! üéâ)\n`;
                } else {
                    message += `   Env√≠o: $${shippingCost} MXN\n`;
                }
                message += `   üéØ TOTAL: $${finalTotal} MXN\n\n`;
                
                message += `üí≥ M√©todo de pago: ${currentOrder.payment === 'efectivo' ? 'Efectivo' : 'Transferencia HSBC'}\n\n`;
                
                if (currentOrder.delivery === 'tienda') {
                    message += `üè™ RECOGER EN TIENDA:\n\n`;
                    message += `üìç Direcci√≥n del negocio:\n`;
                    message += `üõ£Ô∏è Calle: Saavedra\n`;
                    message += `üè† N√∫mero exterior: 1213\n`;
                    message += `üèòÔ∏è Privada: Benavente\n`;
                    message += `üîë C√≥digo de acceso: 297822#\n`;
                    message += `üè° Detalles: Casa caf√© con blanco cerco de malla\n\n`;
                    message += `‚ö†Ô∏è Nota: No olvide mostrar una identificaci√≥n oficial para su ingreso.\n\n`;
                } else {
                    const colonia = document.getElementById('colonia').value;
                    const calle = document.getElementById('calle').value;
                    const numero = document.getElementById('numero').value;
                    const privada = document.getElementById('privada').value;
                    const codigo = document.getElementById('codigo').value;
                    const telefono = document.getElementById('telefono').value;

                    message += `üöó ENV√çO A DOMICILIO:\n`;
                    message += `üèòÔ∏è Colonia: ${colonia}\n`;
                    message += `üõ£Ô∏è Calle: ${calle}\n`;
                    message += `üè† N√∫mero exterior: ${numero}\n`;
                    if (privada) message += `üèòÔ∏è Privada: ${privada}\n`;
                    if (codigo) message += `üîë C√≥digo de acceso: ${codigo}\n`;
                    message += `üì± Tel√©fono: ${telefono}\n\n`;

                    if (currentOrder.payment === 'transferencia') {
                        message += `üí≥ INFORMACI√ìN PARA TRANSFERENCIA:\n`;
                        message += `üè¶ Banco: HSBC\n`;
                        message += `üë§ Titular: Alan Stephen Vega Chacon\n`;
                        message += `üí∞ Monto a transferir: $${finalTotal} MXN\n\n`;
                        message += `üìÑ Por favor env√≠a el comprobante de transferencia para confirmar tu pedido.\n\n`;
                    }
                }
            } else {
                // Pedido individual (c√≥digo original)
                const juiceNames = {
                    'verde': 'Green Day',
                    'naranja': 'AC/DCitrus',
                    'mango': 'Mango Van Gogh',
                    'berries': 'Berryonc√©',
                    'fresa': 'Adeleicious',
                    'personalizado': 'Jugo Personalizado'
                };

                const juicePrices = {
                    'verde': 55,
                    'naranja': 55,
                    'mango': 60,
                    'berries': 65,
                    'fresa': 60,
                    'personalizado': 50
                };
                
                let price = juicePrices[currentOrder.juice] || 50;
                
                // Agregar costo por tama√±o
                if (currentOrder.size === '24oz') {
                    price += 10;
                }

                if (currentOrder.extras.length > 3) {
                    price += (currentOrder.extras.length - 3) * 5;
                }
                
                // Para pedidos individuales, siempre cobrar env√≠o si es domicilio
                if (currentOrder.delivery === 'domicilio') {
                    price += 20;
                }

                message += `ü•§ Nombre del jugo: ${juiceNames[currentOrder.juice]}\n`;
                message += `üìè Tama√±o: ${currentOrder.size === '16oz' ? '16 oz (Chico)' : '24 oz (Grande)'}\n`;
                
                if (currentOrder.extras.length > 0) {
                    message += `üåà Ingredientes extras: ${currentOrder.extras.join(', ')}\n`;
                    
                    const customName = document.getElementById('custom-name').value.trim();
                    if (customName) {
                        message += `‚ú® Nombre de mi creaci√≥n: "${customName}"\n`;
                    }
                }
                
                message += `üçØ Endulzante: ${currentOrder.sweetener}\n`;
                message += `ü•§ Preparaci√≥n: ${currentOrder.preparation}\n`;
                message += `üí≥ M√©todo de pago: ${currentOrder.payment === 'efectivo' ? 'Efectivo' : 'Transferencia HSBC'}\n`;
                message += `üí∞ Precio: $${price} MXN\n\n`;

                if (currentOrder.delivery === 'tienda') {
                    message += `üè™ RECOGER EN TIENDA:\n\n`;
                    message += `üìç Direcci√≥n del negocio:\n`;
                    message += `üõ£Ô∏è Calle: Saavedra\n`;
                    message += `üè† N√∫mero exterior: 1213\n`;
                    message += `üèòÔ∏è Privada: Benavente\n`;
                    message += `üîë C√≥digo de acceso: 297822#\n`;
                    message += `üè° Detalles: Casa caf√© con blanco cerco de malla\n\n`;
                    message += `‚ö†Ô∏è Nota: No olvide mostrar una identificaci√≥n oficial para su ingreso.\n\n`;
                } else {
                    const colonia = document.getElementById('colonia').value;
                    const calle = document.getElementById('calle').value;
                    const numero = document.getElementById('numero').value;
                    const privada = document.getElementById('privada').value;
                    const codigo = document.getElementById('codigo').value;
                    const telefono = document.getElementById('telefono').value;

                    message += `üöó ENV√çO A DOMICILIO:\n`;
                    message += `üèòÔ∏è Colonia: ${colonia}\n`;
                    message += `üõ£Ô∏è Calle: ${calle}\n`;
                    message += `üè† N√∫mero exterior: ${numero}\n`;
                    if (privada) message += `üèòÔ∏è Privada: ${privada}\n`;
                    if (codigo) message += `üîë C√≥digo de acceso: ${codigo}\n`;
                    message += `üì± Tel√©fono: ${telefono}\n\n`;

                    if (currentOrder.payment === 'transferencia') {
                        message += `üí≥ INFORMACI√ìN PARA TRANSFERENCIA:\n`;
                        message += `üè¶ Banco: HSBC\n`;
                        message += `üë§ Titular: Alan Stephen Vega Chacon\n`;
                        message += `üí∞ Monto a transferir: $${price} MXN\n\n`;
                        message += `üìÑ Por favor env√≠a el comprobante de transferencia para confirmar tu pedido.\n\n`;
                    }
                }
            }

            message += `üçπ‚ú® ¬°Tu jugo, tu estilo, tu fruitbox! ‚ú®üçπ`;

            const whatsappUrl = `https://wa.me/526862442310?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }

        function addToCart() {
            if (!currentOrder.juice || !currentOrder.preparation || !currentOrder.sweetener || !currentOrder.size) {
                alert('Por favor completa todas las opciones antes de agregar al carrito');
                return;
            }

            const juiceNames = {
                'verde': 'Green Day',
                'naranja': 'AC/DCitrus',
                'mango': 'Mango Van Gogh',
                'berries': 'Berryonc√©',
                'fresa': 'Adeleicious',
                'personalizado': 'Jugo Personalizado'
            };

            const juicePrices = {
                'verde': 45,
                'naranja': 45,
                'mango': 50,
                'berries': 55,
                'fresa': 50,
                'personalizado': 50
            };

            let price = juicePrices[currentOrder.juice] || 50;

            // Agregar costo por tama√±o
            if (currentOrder.size === '24oz') {
                price += 10;
            }
            
            // Agregar costo de ingredientes extras
            if (currentOrder.extras.length > 3) {
                price += (currentOrder.extras.length - 3) * 5;
            }

            const customName = document.getElementById('custom-name') ? document.getElementById('custom-name').value.trim() : '';

            const cartItem = {
                id: Date.now(),
                juice: currentOrder.juice,
                name: juiceNames[currentOrder.juice],
                customName: customName,
                extras: [...currentOrder.extras],
                preparation: currentOrder.preparation,
                sweetener: currentOrder.sweetener,
                size: currentOrder.size,
                price: price,
                quantity: 1
            };

            cart.push(cartItem);
            cartCount++;
            updateCartDisplay();
            
            // Reset current order
            resetCurrentOrder();
            
            // Scroll back to top smoothly
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
            
            // Show success message
            const addBtn = document.getElementById('add-to-cart-btn');
            const originalText = addBtn.innerHTML;
            addBtn.innerHTML = '‚úÖ ¬°Agregado al carrito!';
            addBtn.classList.add('bg-green-500');
            
            setTimeout(() => {
                addBtn.innerHTML = originalText;
                addBtn.classList.remove('bg-green-500');
            }, 2000);
        }

        function resetCurrentOrder() {
            currentOrder = {
                juice: '',
                extras: [],
                preparation: '',
                sweetener: '',
                size: '',
                delivery: '',
                payment: ''
            };

            // Reset UI
            document.querySelectorAll('.juice-card, .prep-option, .sweet-option, .size-option').forEach(item => {
                item.classList.remove('selected');
            });
            
            document.querySelectorAll('.extra-item').forEach(item => {
                item.classList.remove('selected');
            });

            document.getElementById('extras-section').classList.add('hidden');
            document.getElementById('add-to-cart-section').classList.add('hidden');
            document.getElementById('order-summary').classList.add('hidden');
            
            if (document.getElementById('custom-name')) {
                document.getElementById('custom-name').value = '';
            }
        }

        function updateCartDisplay() {
            document.getElementById('cart-count').textContent = cartCount;
            
            const cartItems = document.getElementById('cart-items');
            const cartSummary = document.getElementById('cart-summary');
            
            if (cart.length === 0) {
                cartItems.innerHTML = '<div id="empty-cart" class="text-center py-8 text-gray-500"><div class="text-4xl mb-2">üõí</div><p>Tu carrito est√° vac√≠o</p><p class="text-sm">¬°Agrega algunos jugos deliciosos!</p></div>';
                cartSummary.classList.add('hidden');
            } else {
                cartSummary.classList.remove('hidden');
                
                let cartHTML = '';
                let subtotal = 0;
                
                cart.forEach(item => {
                    const itemTotal = item.price * item.quantity;
                    subtotal += itemTotal;
                    
                    cartHTML += `
                        <div class="border-b border-gray-200 pb-4 mb-4 last:border-b-0">
                            <div class="flex justify-between items-start mb-2">
                                <div class="flex-1 pr-2">
                                    <h4 class="font-bold text-gray-800 mb-1">${item.name}</h4>
                                    ${item.customName ? `<p class="text-xs text-purple-600 italic font-medium mb-1">‚ú® "${item.customName}"</p>` : ''}
                                    <div class="text-xs text-gray-600 space-y-1">
                                        <p>üìè Tama√±o: ${item.size === '16oz' ? '16oz (Chico)' : '24oz (Grande)'}</p>
                                        <p>ü•§ Preparaci√≥n: ${item.preparation}</p>
                                        <p>üçØ Endulzante: ${item.sweetener}</p>
                                        ${item.extras.length > 0 ? `<p>üåà Extras: ${item.extras.join(', ')}</p>` : ''}
                                    </div>
                                </div>
                                <button onclick="removeFromCart(${item.id})" class="text-red-500 hover:text-red-700 p-1">
                                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                                    </svg>
                                </button>
                            </div>
                            <div class="flex justify-between items-center bg-gray-50 p-2 rounded-lg">
                                <div class="flex items-center gap-3">
                                    <span class="text-sm text-gray-600">Cantidad:</span>
                                    <div class="flex items-center gap-2">
                                        <button onclick="updateQuantity(${item.id}, -1)" class="bg-white hover:bg-gray-100 border border-gray-300 w-8 h-8 rounded-full text-sm font-bold flex items-center justify-center">-</button>
                                        <span class="text-sm font-bold min-w-[20px] text-center">${item.quantity}</span>
                                        <button onclick="updateQuantity(${item.id}, 1)" class="bg-white hover:bg-gray-100 border border-gray-300 w-8 h-8 rounded-full text-sm font-bold flex items-center justify-center">+</button>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="text-xs text-gray-500">$${item.price} c/u</p>
                                    <p class="font-bold text-green-600">$${itemTotal}</p>
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                cartItems.innerHTML = cartHTML;
                
                // Calcular env√≠o seg√∫n las reglas
                const totalJuices = cart.reduce((total, item) => total + item.quantity, 0);
                let shippingCost = 0;
                let shippingText = '$0';
                
                if (currentOrder.delivery === 'domicilio') {
                    if (totalJuices >= 3) {
                        shippingCost = 0;
                        shippingText = `$0 (¬°GRATIS por ${totalJuices} jugos! üéâ)`;
                    } else {
                        shippingCost = 20;
                        shippingText = `$${shippingCost}`;
                    }
                } else {
                    shippingCost = 0;
                    shippingText = '$0';
                }
                
                const total = subtotal + shippingCost;
                
                document.getElementById('cart-subtotal').textContent = `$${subtotal}`;
                document.getElementById('cart-shipping').innerHTML = shippingText;
                document.getElementById('cart-total').textContent = `$${total}`;
            }
        }

        function removeFromCart(itemId) {
            cart = cart.filter(item => item.id !== itemId);
            cartCount = cart.reduce((total, item) => total + item.quantity, 0);
            updateCartDisplay();
        }

        function updateQuantity(itemId, change) {
            const item = cart.find(item => item.id === itemId);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    removeFromCart(itemId);
                } else {
                    cartCount = cart.reduce((total, item) => total + item.quantity, 0);
                    updateCartDisplay();
                }
            }
        }

        function toggleCart() {
            const cartModal = document.getElementById('cart-modal');
            cartModal.classList.toggle('hidden');
        }

        function proceedToCheckout() {
            if (cart.length === 0) {
                alert('Tu carrito est√° vac√≠o');
                return;
            }
            
            // Hide cart and show delivery/payment options
            toggleCart();
            
            // Si ya hay entrega y pago seleccionados, mostrar resumen inmediatamente
            if (currentOrder.delivery && currentOrder.payment) {
                showCartCheckoutSummary();
            } else {
                // Scroll to delivery section
                setTimeout(() => {
                    const sections = document.querySelectorAll('.bg-white.rounded-2xl.shadow-xl');
                    for (let section of sections) {
                        if (section.textContent.includes('Entrega')) {
                            section.scrollIntoView({ 
                                behavior: 'smooth', 
                                block: 'start' 
                            });
                            break;
                        }
                    }
                }, 100);
            }
        }
    </script>
</body>
</html>
